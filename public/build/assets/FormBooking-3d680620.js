import{T as O,K as I,p,o as l,f as s,a as f,u as a,c as P,g as r,b as c,n as F,t as D,e as E}from"./app-c5058300.js";import K from"./Loader-69a44a0d.js";import L from"./FieldCombobox-fb3363af.js";import b from"./FieldInput-47ad627a.js";import M from"./FieldSelectDentists-1d987b93.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./index-a9dcee52.js";import"./LoaderSmall-91ba3376.js";import"./combobox-33e8d194.js";import"./hidden-6fbfc07f.js";import"./use-tracked-pointer-e870ac66.js";import"./disposables-ed35e013.js";import"./ChevronUpDownIcon-4f021c29.js";import"./listbox-9c1f33ae.js";const T=["onSubmit"],Z={key:3,class:"border-t pt-2"},A=c("h5",{class:"font-semibold"},"Novi pacijent",-1),G={class:"flex items-end"},H={key:0},se={__name:"FormBooking",props:{appointment:{type:Object,required:!1},selectedPatient:{type:Object,required:!1},date:Object,data:{type:Object,required:!1},edit:{type:Boolean,required:!1}},emits:["success","delete"],setup(v,{emit:U}){var _,y,V,k,g,j,x,h,w;const o=v,t=O({_method:"post",date:((_=o.date)==null?void 0:_.date)||null,dentist_id:((y=o==null?void 0:o.data)==null?void 0:y.dentist_id)||(((g=(k=(V=I())==null?void 0:V.props.auth)==null?void 0:k.user)==null?void 0:g.role)===2?(x=(j=I())==null?void 0:j.props.auth)==null?void 0:x.user:0),patient_id:((h=o==null?void 0:o.data)==null?void 0:h.patient_id)||null,new_patient:!1,first_name:null,last_name:null,phone:null}),d=p(!1),q=p(((w=o==null?void 0:o.data)==null?void 0:w.patient_id)||null),i=p(!1),m=p({}),N=()=>{var u,e;d.value=!0,o.edit&&(t._method="put"),t.post(o.edit?route("appointments.update_users",{id:((e=(u=o==null?void 0:o.appointment)==null?void 0:u._def)==null?void 0:e.publicId)??null}):route("appointments.store"),{preserveScroll:!0,onSuccess:()=>{U("success")},onFinish:()=>{d.value=!1}})};return console.log(o.data),(u,e)=>{var z,B,S,$,C;return l(),s("form",{onSubmit:E(N,["prevent"]),class:"space-y-2"},[f(M,{modelValue:a(t).dentist_id,"onUpdate:modelValue":e[0]||(e[0]=n=>a(t).dentist_id=n),type:"dentist",items:u.$page.props.global.dentists.data,name:"dentist_id",label:"Izaberite doktora",error:(z=a(t).errors)==null?void 0:z.dentist_id},null,8,["modelValue","items","error"]),i.value?r("",!0):(l(),P(L,{key:0,modelValue:a(t).patient_id,"onUpdate:modelValue":e[1]||(e[1]=n=>a(t).patient_id=n),items:q.value,name:"patient_id",label:"Izaberite pacijenta",error:(B=a(t).errors)==null?void 0:B.patient_id,onSearched:e[2]||(e[2]=n=>m.value=n)},null,8,["modelValue","items","error"])),m.value.length<1&&!i.value?(l(),s("button",{key:1,type:"button",class:"text-red-500 underline",onClick:e[3]||(e[3]=()=>{a(t).new_patient=!0,i.value=!0})}," Pacijent ne postoji u bazi? ")):r("",!0),m.value.length<1&&i.value?(l(),s("button",{key:2,type:"button",class:"pb-2 text-red-500 underline",onClick:e[4]||(e[4]=()=>{a(t).new_patient=!1,i.value=!1})}," Ponovo pokušaj pretragu? ")):r("",!0),m.value.length<1&&i.value?(l(),s("div",Z,[A,f(b,{modelValue:a(t).first_name,"onUpdate:modelValue":e[5]||(e[5]=n=>a(t).first_name=n),name:"first_name",label:"Ime pacijenta",error:(S=a(t).errors)==null?void 0:S.first_name},null,8,["modelValue","error"]),f(b,{modelValue:a(t).last_name,"onUpdate:modelValue":e[6]||(e[6]=n=>a(t).last_name=n),name:"last_name",label:"Prezime pacijenta",error:($=a(t).errors)==null?void 0:$.last_name},null,8,["modelValue","error"]),f(b,{modelValue:a(t).phone,"onUpdate:modelValue":e[7]||(e[7]=n=>a(t).phone=n),name:"phone",label:"Broj telefona pacijenta",error:(C=a(t).errors)==null?void 0:C.phone},null,8,["modelValue","error"])])):r("",!0),c("div",G,[v.edit?(l(),s("button",{key:0,type:"button",onClick:e[8]||(e[8]=n=>u.$emit("delete",{id:a(t).record})),class:"mr-auto text-red-500 hover:underline"},"Izbriši zakazano")):r("",!0),c("button",{type:"submit",class:F([d.value?"opacity-25":"","focus-visible:ring-ring border-input mb-4 ml-auto inline-flex w-full items-center justify-center space-x-2 rounded-xl border bg-emerald-600 px-6 py-2 text-base font-medium text-white shadow-sm transition-colors hover:bg-emerald-700 hover:text-white focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none disabled:opacity-50 sm:mb-0 sm:mt-4 sm:w-[200px]"])},[d.value?r("",!0):(l(),s("span",H,D("Zakaži"))),d.value?(l(),P(K,{key:1,class:"w-[56px]"})):r("",!0)],2)])],40,T)}}};export{se as default};
