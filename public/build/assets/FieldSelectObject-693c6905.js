import{p as w,k as z,h as g,B as oe,q as K,x as te,l as G,F as _,s as ne,z as ie,C as re,A as T,D as E,o as O,f as k,b as B,d as ue,t as F,g as V,a as j,w as M,u as A,E as J,I as se,c as de,n as X}from"./app-0744ca96.js";import{o as m,u as C,y as ve,w as ce,h as pe,c as fe,l as N,f as be,K as me,a as xe,H as U,T as ge,t as Q,p as ye,N as Y,O as he,b as f}from"./hidden-059f3f0c.js";import{d as Oe,x as Se,a as S,e as ke,b as we,u as Le,r as Re,c as De}from"./ChevronUpDownIcon-d8028798.js";let Z=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ee(t){var r,v;let p=(r=t.innerText)!=null?r:"",e=t.cloneNode(!0);if(!(e instanceof HTMLElement))return p;let i=!1;for(let x of e.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))x.remove(),i=!0;let d=i?(v=e.innerText)!=null?v:"":p;return Z.test(d)&&(d=d.replace(Z,"")),d}function Te(t){let r=t.getAttribute("aria-label");if(typeof r=="string")return r.trim();let v=t.getAttribute("aria-labelledby");if(v){let p=v.split(" ").map(e=>{let i=document.getElementById(e);if(i){let d=i.getAttribute("aria-label");return typeof d=="string"?d.trim():ee(i).trim()}return null}).filter(Boolean);if(p.length>0)return p.join(", ")}return ee(t).trim()}function $e(t){let r=w(""),v=w("");return()=>{let p=m(t);if(!p)return"";let e=p.innerText;if(r.value===e)return v.value;let i=Te(p).trim().toLowerCase();return r.value=e,v.value=i,i}}function Pe(t,r){return t===r}var Be=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Be||{}),Fe=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(Fe||{}),Ve=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Ve||{});function Ce(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let le=Symbol("ListboxContext");function H(t){let r=re(le,null);if(r===null){let v=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(v,H),v}return r}let Ie=z({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Pe},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:r,attrs:v,emit:p}){let e=w(1),i=w(null),d=w(null),x=w(null),b=w([]),l=w(""),a=w(null),L=w(1);function R(o=n=>n){let n=a.value!==null?b.value[a.value]:null,u=he(o(b.value.slice()),h=>m(h.dataRef.domRef)),c=n?u.indexOf(n):null;return c===-1&&(c=null),{options:u,activeOptionIndex:c}}let D=g(()=>t.multiple?1:0),[$,I]=Oe(g(()=>t.modelValue),o=>p("update:modelValue",o),g(()=>t.defaultValue)),P=g(()=>$.value===void 0?C(D.value,{1:[],0:void 0}):$.value),s={listboxState:e,value:P,mode:D,compare(o,n){if(typeof t.by=="string"){let u=t.by;return(o==null?void 0:o[u])===(n==null?void 0:n[u])}return t.by(o,n)},orientation:g(()=>t.horizontal?"horizontal":"vertical"),labelRef:i,buttonRef:d,optionsRef:x,disabled:g(()=>t.disabled),options:b,searchQuery:l,activeOptionIndex:a,activationTrigger:L,closeListbox(){t.disabled||e.value!==1&&(e.value=1,a.value=null)},openListbox(){t.disabled||e.value!==0&&(e.value=0)},goToOption(o,n,u){if(t.disabled||e.value===1)return;let c=R(),h=Se(o===S.Specific?{focus:S.Specific,id:n}:{focus:o},{resolveItems:()=>c.options,resolveActiveIndex:()=>c.activeOptionIndex,resolveId:q=>q.id,resolveDisabled:q=>q.dataRef.disabled});l.value="",a.value=h,L.value=u??1,b.value=c.options},search(o){if(t.disabled||e.value===1)return;let n=l.value!==""?0:1;l.value+=o.toLowerCase();let u=(a.value!==null?b.value.slice(a.value+n).concat(b.value.slice(0,a.value+n)):b.value).find(h=>h.dataRef.textValue.startsWith(l.value)&&!h.dataRef.disabled),c=u?b.value.indexOf(u):-1;c===-1||c===a.value||(a.value=c,L.value=1)},clearSearch(){t.disabled||e.value!==1&&l.value!==""&&(l.value="")},registerOption(o,n){let u=R(c=>[...c,{id:o,dataRef:n}]);b.value=u.options,a.value=u.activeOptionIndex},unregisterOption(o){let n=R(u=>{let c=u.findIndex(h=>h.id===o);return c!==-1&&u.splice(c,1),u});b.value=n.options,a.value=n.activeOptionIndex,L.value=1},theirOnChange(o){t.disabled||I(o)},select(o){t.disabled||I(C(D.value,{0:()=>o,1:()=>{let n=T(s.value.value).slice(),u=T(o),c=n.findIndex(h=>s.compare(u,T(h)));return c===-1?n.push(u):n.splice(c,1),n}}))}};ve([d,x],(o,n)=>{var u;s.closeListbox(),ce(n,pe.Loose)||(o.preventDefault(),(u=m(d))==null||u.focus())},g(()=>e.value===0)),oe(le,s),fe(g(()=>C(e.value,{0:N.Open,1:N.Closed})));let y=g(()=>{var o;return(o=m(d))==null?void 0:o.closest("form")});return K(()=>{te([y],()=>{if(!y.value||t.defaultValue===void 0)return;function o(){s.theirOnChange(t.defaultValue)}return y.value.addEventListener("reset",o),()=>{var n;(n=y.value)==null||n.removeEventListener("reset",o)}},{immediate:!0})}),()=>{let{name:o,modelValue:n,disabled:u,form:c,...h}=t,q={open:e.value===0,disabled:u,value:P.value};return G(_,[...o!=null&&P.value!=null?ke({[o]:P.value}).map(([W,ae])=>G(be,me({features:xe.Hidden,key:W,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:c,name:W,value:ae}))):[],U({ourProps:{},theirProps:{...v,...ge(h,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:q,slots:r,attrs:v,name:"Listbox"})])}}}),je=z({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${Q()}`}},setup(t,{attrs:r,slots:v,expose:p}){let e=H("ListboxButton");p({el:e.buttonRef,$el:e.buttonRef});function i(l){switch(l.key){case f.Space:case f.Enter:case f.ArrowDown:l.preventDefault(),e.openListbox(),E(()=>{var a;(a=m(e.optionsRef))==null||a.focus({preventScroll:!0}),e.value.value||e.goToOption(S.First)});break;case f.ArrowUp:l.preventDefault(),e.openListbox(),E(()=>{var a;(a=m(e.optionsRef))==null||a.focus({preventScroll:!0}),e.value.value||e.goToOption(S.Last)});break}}function d(l){switch(l.key){case f.Space:l.preventDefault();break}}function x(l){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),E(()=>{var a;return(a=m(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(l.preventDefault(),e.openListbox(),Ce(()=>{var a;return(a=m(e.optionsRef))==null?void 0:a.focus({preventScroll:!0})})))}let b=we(g(()=>({as:t.as,type:r.type})),e.buttonRef);return()=>{var l,a;let L={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:R,...D}=t,$={ref:e.buttonRef,id:R,type:b.value,"aria-haspopup":"listbox","aria-controls":(l=m(e.optionsRef))==null?void 0:l.id,"aria-expanded":e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(a=m(e.labelRef))==null?void 0:a.id,R].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:i,onKeyup:d,onClick:x};return U({ourProps:$,theirProps:D,slot:L,attrs:r,slots:v,name:"ListboxButton"})}}}),Ae=z({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${Q()}`}},setup(t,{attrs:r,slots:v,expose:p}){let e=H("ListboxOptions"),i=w(null);p({el:e.optionsRef,$el:e.optionsRef});function d(l){switch(i.value&&clearTimeout(i.value),l.key){case f.Space:if(e.searchQuery.value!=="")return l.preventDefault(),l.stopPropagation(),e.search(l.key);case f.Enter:if(l.preventDefault(),l.stopPropagation(),e.activeOptionIndex.value!==null){let a=e.options.value[e.activeOptionIndex.value];e.select(a.dataRef.value)}e.mode.value===0&&(e.closeListbox(),E(()=>{var a;return(a=m(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})}));break;case C(e.orientation.value,{vertical:f.ArrowDown,horizontal:f.ArrowRight}):return l.preventDefault(),l.stopPropagation(),e.goToOption(S.Next);case C(e.orientation.value,{vertical:f.ArrowUp,horizontal:f.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),e.goToOption(S.Previous);case f.Home:case f.PageUp:return l.preventDefault(),l.stopPropagation(),e.goToOption(S.First);case f.End:case f.PageDown:return l.preventDefault(),l.stopPropagation(),e.goToOption(S.Last);case f.Escape:l.preventDefault(),l.stopPropagation(),e.closeListbox(),E(()=>{var a;return(a=m(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})});break;case f.Tab:l.preventDefault(),l.stopPropagation();break;default:l.key.length===1&&(e.search(l.key),i.value=setTimeout(()=>e.clearSearch(),350));break}}let x=ye(),b=g(()=>x!==null?(x.value&N.Open)===N.Open:e.listboxState.value===0);return()=>{var l,a,L,R;let D={open:e.listboxState.value===0},{id:$,...I}=t,P={"aria-activedescendant":e.activeOptionIndex.value===null||(l=e.options.value[e.activeOptionIndex.value])==null?void 0:l.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(R=(a=m(e.labelRef))==null?void 0:a.id)!=null?R:(L=m(e.buttonRef))==null?void 0:L.id,"aria-orientation":e.orientation.value,id:$,onKeydown:d,role:"listbox",tabIndex:0,ref:e.optionsRef};return U({ourProps:P,theirProps:I,slot:D,attrs:r,slots:v,features:Y.RenderStrategy|Y.Static,visible:b.value,name:"ListboxOptions"})}}}),Ee=z({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${Q()}`}},setup(t,{slots:r,attrs:v,expose:p}){let e=H("ListboxOption"),i=w(null);p({el:i,$el:i});let d=g(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t.id:!1),x=g(()=>C(e.mode.value,{0:()=>e.compare(T(e.value.value),T(t.value)),1:()=>T(e.value.value).some(s=>e.compare(T(s),T(t.value)))})),b=g(()=>C(e.mode.value,{1:()=>{var s;let y=T(e.value.value);return((s=e.options.value.find(o=>y.some(n=>e.compare(T(n),T(o.dataRef.value)))))==null?void 0:s.id)===t.id},0:()=>x.value})),l=$e(i),a=g(()=>({disabled:t.disabled,value:t.value,get textValue(){return l()},domRef:i}));K(()=>e.registerOption(t.id,a)),ne(()=>e.unregisterOption(t.id)),K(()=>{te([e.listboxState,x],()=>{e.listboxState.value===0&&x.value&&C(e.mode.value,{1:()=>{b.value&&e.goToOption(S.Specific,t.id)},0:()=>{e.goToOption(S.Specific,t.id)}})},{immediate:!0})}),ie(()=>{e.listboxState.value===0&&d.value&&e.activationTrigger.value!==0&&E(()=>{var s,y;return(y=(s=m(i))==null?void 0:s.scrollIntoView)==null?void 0:y.call(s,{block:"nearest"})})});function L(s){if(t.disabled)return s.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),E(()=>{var y;return(y=m(e.buttonRef))==null?void 0:y.focus({preventScroll:!0})}))}function R(){if(t.disabled)return e.goToOption(S.Nothing);e.goToOption(S.Specific,t.id)}let D=Le();function $(s){D.update(s)}function I(s){D.wasMoved(s)&&(t.disabled||d.value||e.goToOption(S.Specific,t.id,0))}function P(s){D.wasMoved(s)&&(t.disabled||d.value&&e.goToOption(S.Nothing))}return()=>{let{disabled:s}=t,y={active:d.value,selected:x.value,disabled:s},{id:o,value:n,disabled:u,...c}=t,h={id:o,ref:i,role:"option",tabIndex:s===!0?void 0:-1,"aria-disabled":s===!0?!0:void 0,"aria-selected":x.value,disabled:void 0,onClick:L,onFocus:R,onPointerenter:$,onMouseenter:$,onPointermove:I,onMousemove:I,onPointerleave:P,onMouseleave:P};return U({ourProps:h,theirProps:c,slot:y,attrs:v,slots:r,name:"ListboxOption"})}}});function qe(t,r){return O(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])}const Me={class:"relative flex text-sm font-medium text-gray-700 sm:mt-px sm:pt-3"},Ne={key:0,class:"relative -left-1 -top-1 text-red-500"},ze={class:"mt-1 sm:col-span-2 sm:mt-0"},Ue={class:"relative mt-1"},He={key:0,class:"block truncate"},Ke={key:1,class:"block truncate text-gray-400"},_e={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Qe={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-red-600"},We={key:1,class:"text-sm text-gray-500"},Ge={key:0,class:"mt-2 text-sm text-gray-500"},Je={key:0,class:"ml-2 mt-1 text-xs text-red-500"},Xe={key:1,class:"mt-0.5 flex flex-wrap items-center space-x-0.5"},Ye=["onClick"],lt={__name:"FieldSelectObject",props:{label:{type:String,required:!0},name:{type:String,required:!0},items:{type:Object,required:!0,default:[]},value:{type:Object,required:!1},required:{type:Boolean,required:!1},error:{type:String,required:!1},multiple:{type:Boolean,required:!1},description:{type:String,required:!1}},setup(t){const r=t;return(v,p)=>(O(),k("div",null,[B("label",Me,[B("span",null,[ue(F(t.label)+" ",1),t.required?(O(),k("span",Ne,"*")):V("",!0)])]),B("div",ze,[j(A(Ie),{multiple:t.multiple||!1,modelValue:t.value,"onUpdate:modelValue":p[0]||(p[0]=e=>v.$emit("update:modelValue",e)),by:"id"},{default:M(()=>[B("div",Ue,[j(A(je),{class:"relative h-10 w-full cursor-default rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 text-left shadow-sm focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-orange-300 sm:text-sm"},{default:M(()=>{var e;return[t.value?(O(),k("span",He,F(r.multiple?t.value.map(i=>i.name).join(", "):t.value.name),1)):V("",!0),((e=t.value)==null?void 0:e.length)===0?(O(),k("span",Ke,F(t.label),1)):V("",!0),B("span",_e,[j(A(Re),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])]}),_:1}),j(se,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:M(()=>[j(A(Ae),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-sm ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:M(()=>[(O(!0),k(_,null,J(t.items,e=>(O(),de(A(Ee),{key:e==null?void 0:e.id,value:e,as:"template"},{default:M(({active:i,selected:d})=>[B("li",{class:X([i?"bg-red-100 text-red-900":"text-gray-900","relative cursor-default select-none py-2 pl-10 pr-4"])},[B("span",{class:X([d?"font-medium":"font-normal","block truncate"])},F(e==null?void 0:e.name),3),d?(O(),k("span",Qe,[j(A(De),{class:"h-5 w-5","aria-hidden":"true"})])):V("",!0),e!=null&&e.description?(O(),k("span",We,F(e.description),1)):V("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),r.description?(O(),k("p",Ge,F(r.description),1)):V("",!0)]),_:1},8,["multiple","modelValue"]),t.error?(O(),k("p",Je,F(t.error),1)):V("",!0),t.multiple&&t.value.length>0?(O(),k("div",Xe,[(O(!0),k(_,null,J(t.value,e=>(O(),k("button",{type:"button",key:e.id,class:"mt-0.5 flex items-center justify-center space-x-2 rounded bg-slate-100 py-1 pl-3 pr-2 text-xs text-gray-500 hover:bg-gray-200",onClick:()=>v.$emit("update:modelValue",t.value.filter(i=>i.id!==e.id))},[B("span",null,F(e.name),1),j(A(qe),{class:"h-3 w-3"})],8,Ye))),128))])):V("",!0)])]))}};export{lt as default};
