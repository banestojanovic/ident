import{o as _,f as G,b as J,p as S,k as E,h as g,D as W,y as V,q,l as N,F as X,E as Y,G as Z,H as ee,I as k,J as F}from"./app-2573025c.js";import{o as m,u as P,y as te,w as le,h as ae,c as oe,l as I,f as ne,K as ie,a as ue,H as A,T as re,t as M,p as se,N as H,O as de,b as f}from"./hidden-48c42ada.js";import{d as ve,x as pe,a as y,e as ce,b as fe,u as be}from"./use-tracked-pointer-e4d32435.js";function ke(t,s){return _(),G("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[J("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])}let U=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function z(t){var s,p;let c=(s=t.innerText)!=null?s:"",e=t.cloneNode(!0);if(!(e instanceof HTMLElement))return c;let r=!1;for(let x of e.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))x.remove(),r=!0;let v=r?(p=e.innerText)!=null?p:"":c;return U.test(v)&&(v=v.replace(U,"")),v}function me(t){let s=t.getAttribute("aria-label");if(typeof s=="string")return s.trim();let p=t.getAttribute("aria-labelledby");if(p){let c=p.split(" ").map(e=>{let r=document.getElementById(e);if(r){let v=r.getAttribute("aria-label");return typeof v=="string"?v.trim():z(r).trim()}return null}).filter(Boolean);if(c.length>0)return c.join(", ")}return z(t).trim()}function xe(t){let s=S(""),p=S("");return()=>{let c=m(t);if(!c)return"";let e=c.innerText;if(s.value===e)return p.value;let r=me(c).trim().toLowerCase();return s.value=e,p.value=r,r}}function ge(t,s){return t===s}var Oe=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Oe||{}),he=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(he||{}),ye=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(ye||{});function Se(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let K=Symbol("ListboxContext");function C(t){let s=ee(K,null);if(s===null){let p=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(p,C),p}return s}let De=E({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>ge},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:s,attrs:p,emit:c}){let e=S(1),r=S(null),v=S(null),x=S(null),b=S([]),l=S(""),a=S(null),w=S(1);function R(o=n=>n){let n=a.value!==null?b.value[a.value]:null,i=de(o(b.value.slice()),h=>m(h.dataRef.domRef)),d=n?i.indexOf(n):null;return d===-1&&(d=null),{options:i,activeOptionIndex:d}}let L=g(()=>t.multiple?1:0),[D,$]=ve(g(()=>t.modelValue),o=>c("update:modelValue",o),g(()=>t.defaultValue)),T=g(()=>D.value===void 0?P(L.value,{1:[],0:void 0}):D.value),u={listboxState:e,value:T,mode:L,compare(o,n){if(typeof t.by=="string"){let i=t.by;return(o==null?void 0:o[i])===(n==null?void 0:n[i])}return t.by(o,n)},orientation:g(()=>t.horizontal?"horizontal":"vertical"),labelRef:r,buttonRef:v,optionsRef:x,disabled:g(()=>t.disabled),options:b,searchQuery:l,activeOptionIndex:a,activationTrigger:w,closeListbox(){t.disabled||e.value!==1&&(e.value=1,a.value=null)},openListbox(){t.disabled||e.value!==0&&(e.value=0)},goToOption(o,n,i){if(t.disabled||e.value===1)return;let d=R(),h=pe(o===y.Specific?{focus:y.Specific,id:n}:{focus:o},{resolveItems:()=>d.options,resolveActiveIndex:()=>d.activeOptionIndex,resolveId:B=>B.id,resolveDisabled:B=>B.dataRef.disabled});l.value="",a.value=h,w.value=i??1,b.value=d.options},search(o){if(t.disabled||e.value===1)return;let n=l.value!==""?0:1;l.value+=o.toLowerCase();let i=(a.value!==null?b.value.slice(a.value+n).concat(b.value.slice(0,a.value+n)):b.value).find(h=>h.dataRef.textValue.startsWith(l.value)&&!h.dataRef.disabled),d=i?b.value.indexOf(i):-1;d===-1||d===a.value||(a.value=d,w.value=1)},clearSearch(){t.disabled||e.value!==1&&l.value!==""&&(l.value="")},registerOption(o,n){let i=R(d=>[...d,{id:o,dataRef:n}]);b.value=i.options,a.value=i.activeOptionIndex},unregisterOption(o){let n=R(i=>{let d=i.findIndex(h=>h.id===o);return d!==-1&&i.splice(d,1),i});b.value=n.options,a.value=n.activeOptionIndex,w.value=1},theirOnChange(o){t.disabled||$(o)},select(o){t.disabled||$(P(L.value,{0:()=>o,1:()=>{let n=k(u.value.value).slice(),i=k(o),d=n.findIndex(h=>u.compare(i,k(h)));return d===-1?n.push(i):n.splice(d,1),n}}))}};te([v,x],(o,n)=>{var i;u.closeListbox(),le(n,ae.Loose)||(o.preventDefault(),(i=m(v))==null||i.focus())},g(()=>e.value===0)),W(K,u),oe(g(()=>P(e.value,{0:I.Open,1:I.Closed})));let O=g(()=>{var o;return(o=m(v))==null?void 0:o.closest("form")});return V(()=>{q([O],()=>{if(!O.value||t.defaultValue===void 0)return;function o(){u.theirOnChange(t.defaultValue)}return O.value.addEventListener("reset",o),()=>{var n;(n=O.value)==null||n.removeEventListener("reset",o)}},{immediate:!0})}),()=>{let{name:o,modelValue:n,disabled:i,form:d,...h}=t,B={open:e.value===0,disabled:i,value:T.value};return N(X,[...o!=null&&T.value!=null?ce({[o]:T.value}).map(([j,Q])=>N(ne,ie({features:ue.Hidden,key:j,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:d,name:j,value:Q}))):[],A({ourProps:{},theirProps:{...p,...re(h,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:B,slots:s,attrs:p,name:"Listbox"})])}}}),Te=E({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${M()}`}},setup(t,{attrs:s,slots:p,expose:c}){let e=C("ListboxButton");c({el:e.buttonRef,$el:e.buttonRef});function r(l){switch(l.key){case f.Space:case f.Enter:case f.ArrowDown:l.preventDefault(),e.openListbox(),F(()=>{var a;(a=m(e.optionsRef))==null||a.focus({preventScroll:!0}),e.value.value||e.goToOption(y.First)});break;case f.ArrowUp:l.preventDefault(),e.openListbox(),F(()=>{var a;(a=m(e.optionsRef))==null||a.focus({preventScroll:!0}),e.value.value||e.goToOption(y.Last)});break}}function v(l){switch(l.key){case f.Space:l.preventDefault();break}}function x(l){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),F(()=>{var a;return(a=m(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(l.preventDefault(),e.openListbox(),Se(()=>{var a;return(a=m(e.optionsRef))==null?void 0:a.focus({preventScroll:!0})})))}let b=fe(g(()=>({as:t.as,type:s.type})),e.buttonRef);return()=>{var l,a;let w={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:R,...L}=t,D={ref:e.buttonRef,id:R,type:b.value,"aria-haspopup":"listbox","aria-controls":(l=m(e.optionsRef))==null?void 0:l.id,"aria-expanded":e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(a=m(e.labelRef))==null?void 0:a.id,R].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:r,onKeyup:v,onClick:x};return A({ourProps:D,theirProps:L,slot:w,attrs:s,slots:p,name:"ListboxButton"})}}}),Pe=E({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${M()}`}},setup(t,{attrs:s,slots:p,expose:c}){let e=C("ListboxOptions"),r=S(null);c({el:e.optionsRef,$el:e.optionsRef});function v(l){switch(r.value&&clearTimeout(r.value),l.key){case f.Space:if(e.searchQuery.value!=="")return l.preventDefault(),l.stopPropagation(),e.search(l.key);case f.Enter:if(l.preventDefault(),l.stopPropagation(),e.activeOptionIndex.value!==null){let a=e.options.value[e.activeOptionIndex.value];e.select(a.dataRef.value)}e.mode.value===0&&(e.closeListbox(),F(()=>{var a;return(a=m(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})}));break;case P(e.orientation.value,{vertical:f.ArrowDown,horizontal:f.ArrowRight}):return l.preventDefault(),l.stopPropagation(),e.goToOption(y.Next);case P(e.orientation.value,{vertical:f.ArrowUp,horizontal:f.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),e.goToOption(y.Previous);case f.Home:case f.PageUp:return l.preventDefault(),l.stopPropagation(),e.goToOption(y.First);case f.End:case f.PageDown:return l.preventDefault(),l.stopPropagation(),e.goToOption(y.Last);case f.Escape:l.preventDefault(),l.stopPropagation(),e.closeListbox(),F(()=>{var a;return(a=m(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})});break;case f.Tab:l.preventDefault(),l.stopPropagation();break;default:l.key.length===1&&(e.search(l.key),r.value=setTimeout(()=>e.clearSearch(),350));break}}let x=se(),b=g(()=>x!==null?(x.value&I.Open)===I.Open:e.listboxState.value===0);return()=>{var l,a,w,R;let L={open:e.listboxState.value===0},{id:D,...$}=t,T={"aria-activedescendant":e.activeOptionIndex.value===null||(l=e.options.value[e.activeOptionIndex.value])==null?void 0:l.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(R=(a=m(e.labelRef))==null?void 0:a.id)!=null?R:(w=m(e.buttonRef))==null?void 0:w.id,"aria-orientation":e.orientation.value,id:D,onKeydown:v,role:"listbox",tabIndex:0,ref:e.optionsRef};return A({ourProps:T,theirProps:$,slot:L,attrs:s,slots:p,features:H.RenderStrategy|H.Static,visible:b.value,name:"ListboxOptions"})}}}),$e=E({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${M()}`}},setup(t,{slots:s,attrs:p,expose:c}){let e=C("ListboxOption"),r=S(null);c({el:r,$el:r});let v=g(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t.id:!1),x=g(()=>P(e.mode.value,{0:()=>e.compare(k(e.value.value),k(t.value)),1:()=>k(e.value.value).some(u=>e.compare(k(u),k(t.value)))})),b=g(()=>P(e.mode.value,{1:()=>{var u;let O=k(e.value.value);return((u=e.options.value.find(o=>O.some(n=>e.compare(k(n),k(o.dataRef.value)))))==null?void 0:u.id)===t.id},0:()=>x.value})),l=xe(r),a=g(()=>({disabled:t.disabled,value:t.value,get textValue(){return l()},domRef:r}));V(()=>e.registerOption(t.id,a)),Y(()=>e.unregisterOption(t.id)),V(()=>{q([e.listboxState,x],()=>{e.listboxState.value===0&&x.value&&P(e.mode.value,{1:()=>{b.value&&e.goToOption(y.Specific,t.id)},0:()=>{e.goToOption(y.Specific,t.id)}})},{immediate:!0})}),Z(()=>{e.listboxState.value===0&&v.value&&e.activationTrigger.value!==0&&F(()=>{var u,O;return(O=(u=m(r))==null?void 0:u.scrollIntoView)==null?void 0:O.call(u,{block:"nearest"})})});function w(u){if(t.disabled)return u.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),F(()=>{var O;return(O=m(e.buttonRef))==null?void 0:O.focus({preventScroll:!0})}))}function R(){if(t.disabled)return e.goToOption(y.Nothing);e.goToOption(y.Specific,t.id)}let L=be();function D(u){L.update(u)}function $(u){L.wasMoved(u)&&(t.disabled||v.value||e.goToOption(y.Specific,t.id,0))}function T(u){L.wasMoved(u)&&(t.disabled||v.value&&e.goToOption(y.Nothing))}return()=>{let{disabled:u}=t,O={active:v.value,selected:x.value,disabled:u},{id:o,value:n,disabled:i,...d}=t,h={id:o,ref:r,role:"option",tabIndex:u===!0?void 0:-1,"aria-disabled":u===!0?!0:void 0,"aria-selected":x.value,disabled:void 0,onClick:w,onFocus:R,onPointerenter:D,onMouseenter:D,onPointermove:$,onMousemove:$,onPointerleave:T,onMouseleave:T};return A({ourProps:h,theirProps:d,slot:O,attrs:p,slots:s,name:"ListboxOption"})}}});export{De as B,Pe as H,Te as N,$e as U,ke as r};
