function a(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function s(){return/Android/gi.test(window.navigator.userAgent)}function c(){return a()||s()}function u(r){typeof queueMicrotask=="function"?queueMicrotask(r):Promise.resolve().then(r).catch(n=>setTimeout(()=>{throw n}))}function d(){let r=[],n={addEventListener(t,e,i,o){return t.addEventListener(e,i,o),n.add(()=>t.removeEventListener(e,i,o))},requestAnimationFrame(...t){let e=requestAnimationFrame(...t);n.add(()=>cancelAnimationFrame(e))},nextFrame(...t){n.requestAnimationFrame(()=>{n.requestAnimationFrame(...t)})},setTimeout(...t){let e=setTimeout(...t);n.add(()=>clearTimeout(e))},microTask(...t){let e={current:!0};return u(()=>{e.current&&t[0]()}),n.add(()=>{e.current=!1})},style(t,e,i){let o=t.style.getPropertyValue(e);return Object.assign(t.style,{[e]:i}),this.add(()=>{Object.assign(t.style,{[e]:o})})},group(t){let e=d();return t(e),this.add(()=>e.dispose())},add(t){return r.push(t),()=>{let e=r.indexOf(t);if(e>=0)for(let i of r.splice(e,1))i()}},dispose(){for(let t of r.splice(0))t()}};return n}export{a,c as n,d as o,u as t};
