import{T as _,p as $,o as n,f as d,c as y,u as o,g as l,a as V,b as g,n as j,t as B,e as N}from"./app-875610e1.js";import z from"./Loader-d7b84ca2.js";import C from"./FieldPhoto-cf126e3a.js";import O from"./FieldInput-f9ebd0b5.js";import U from"./FieldTextarea-ae7c4d88.js";import{d as x}from"./helpers-41226ef1.js";import"./_plugin-vue_export-helper-c27b6911.js";const F=["onSubmit"],I={class:"flex items-end"},L={key:0},H={__name:"FormPatientPhoto",props:{patient:Object,edit:Object},emits:["success"],setup(a,{emit:S}){var m,u,p;const r=a,e=_({patient_id:r.patient.id,photo_id:((m=r.edit)==null?void 0:m.id)||null,photo:null,name:((u=r.edit)==null?void 0:u.name)||`Snimak - ${new Date().toLocaleDateString(x.locale,x.options)}`,description:((p=r.edit)==null?void 0:p.description)||null}),s=$(!1),w=()=>{s.value=!0,e.post(route(r.edit?"photos.update":"photos.store"),{preserveScroll:!0,onSuccess:()=>{S("success")},onFinish:()=>{s.value=!1}})};return(D,t)=>{var c,f,b,v,h,k;return n(),d("form",{onSubmit:N(w,["prevent"]),class:"space-y-2"},[a.edit?l("",!0):(n(),y(C,{key:0,modelValue:o(e).photo,"onUpdate:modelValue":t[0]||(t[0]=i=>o(e).photo=i),name:"photo",label:"Dodaj nov snimak",error:(f=(c=o(e))==null?void 0:c.errors)==null?void 0:f.photo},null,8,["modelValue","error"])),V(O,{modelValue:o(e).name,"onUpdate:modelValue":t[1]||(t[1]=i=>o(e).name=i),name:"name",label:"Naslov snimka",error:(v=(b=o(e))==null?void 0:b.errors)==null?void 0:v.photo},null,8,["modelValue","error"]),V(U,{modelValue:o(e).description,"onUpdate:modelValue":t[2]||(t[2]=i=>o(e).description=i),name:"description",label:"Dodatni opis",error:(k=(h=o(e))==null?void 0:h.errors)==null?void 0:k.description},null,8,["modelValue","error"]),g("div",I,[a.edit?(n(),d("button",{key:0,type:"button",onClick:t[3]||(t[3]=i=>D.$emit("delete",{id:o(e).photo_id})),class:"mr-auto text-red-500 hover:underline"},"Izbri≈°i snimak")):l("",!0),g("button",{type:"submit",class:j([s.value?"opacity-25":"","focus-visible:ring-ring border-input ml-auto mt-4 inline-flex items-center justify-center rounded-md border bg-gray-700 px-4 py-2 text-base font-medium text-white shadow-sm transition-colors hover:bg-gray-800 hover:text-white focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none disabled:opacity-50"])},[s.value?l("",!0):(n(),d("span",L,B(a.edit?"Izmeni snimak":"Dodaj snimak"),1)),s.value?(n(),y(z,{key:1,class:"w-[56px]"})):l("",!0)],2)])],40,F)}}};export{H as default};
